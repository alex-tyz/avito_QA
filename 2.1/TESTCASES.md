# Тест-кейсы для API микросервиса объявлений

## Описание API

**Base URL:** `https://qa-internship.avito.com`

API предоставляет следующие эндпоинты:
- `POST /api/1/item` - создание объявления
- `GET /api/1/:sellerID/item` - получение всех объявлений продавца
- `GET /api/1/item/:id` - получение объявления по ID
- `GET /api/1/statistic/:id` - получение статистики объявления

---

## Тест-кейсы

### TC-001: Создание объявления (REST Assured)

**Приоритет:** Высокий  
**Предусловия:** API доступен  
**Тестовые данные:**
- sellerID: 555123
- name: "Тестовое объявление"
- price: 5000
- statistics: {likes: 10, viewCount: 100, contacts: 5}

**Шаги:**
1. Отправить POST запрос на `/api/1/item` с телом запроса содержащим данные объявления
2. Установить заголовок `Content-Type: application/json`

**Ожидаемый результат:**
- Статус код: 200
- Тело ответа содержит поле `status` со значением "Сохранили объявление - {id}"

**Автоматизация:** `SaveItemRestAssuredTest.testSaveItem()`

---

### TC-002: Создание объявления (HttpClient)

**Приоритет:** Высокий  
**Предусловия:** API доступен  
**Тестовые данные:**
- sellerID: 555123
- name: "Тестовое объявление"
- price: 5000
- statistics: {likes: 10, viewCount: 100, contacts: 5}

**Шаги:**
1. Отправить POST запрос на `/api/1/item` с телом запроса содержащим данные объявления
2. Установить заголовки `Content-Type: application/json` и `Accept: application/json`

**Ожидаемый результат:**
- Статус код: 200
- Тело ответа содержит поле `status` со значением "Сохранили объявление - {id}"

**Автоматизация:** `SaveItemHttpClientTest.testSaveItem()`

---

### TC-003: Получение объявления по ID (REST Assured)

**Приоритет:** Высокий  
**Предусловия:**
- API доступен
- Создано объявление с sellerID = 555123

**Шаги:**
1. Создать объявление через POST `/api/1/item`
2. Извлечь ID созданного объявления из ответа
3. Отправить GET запрос на `/api/1/item/{id}`
4. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Статус код: 200
- Тело ответа - массив с одним объектом
- Первый элемент массива содержит:
  - `id` равен ID созданного объявления
  - `name` не null
  - `price` не null

**Автоматизация:** `GetItemByIdRestAssuredTest.testGetItemById()`

---

### TC-004: Получение объявления по ID (HttpClient)

**Приоритет:** Высокий  
**Предусловия:**
- API доступен
- Создано объявление с sellerID = 555123

**Шаги:**
1. Создать объявление через POST `/api/1/item`
2. Извлечь ID созданного объявления из ответа
3. Отправить GET запрос на `/api/1/item/{id}`
4. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Статус код: 200
- Тело ответа - массив с минимум одним объектом
- Первый элемент массива содержит:
  - `id` равен ID созданного объявления
  - `name` не null

**Автоматизация:** `GetItemByIdHttpClientTest.testGetItemById()`

---

### TC-005: Получение всех объявлений продавца (REST Assured)

**Приоритет:** Высокий  
**Предусловия:**
- API доступен
- Создано минимум одно объявление с sellerID = 555123

**Шаги:**
1. Создать объявление с sellerID = 555123 через POST `/api/1/item`
2. Отправить GET запрос на `/api/1/555123/item`
3. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Статус код: 200
- Тело ответа - массив с минимум одним объектом
- Размер массива больше 0
- Первый элемент массива содержит `sellerId` равный 555123

**Автоматизация:** `SellerItemsRestAssuredTest.testGetSellerItems()`

---

### TC-006: Проверка обязательных полей в объявлениях продавца (REST Assured)

**Приоритет:** Средний  
**Предусловия:**
- API доступен
- Существуют объявления с sellerID = 555123

**Шаги:**
1. Отправить GET запрос на `/api/1/555123/item`
2. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Статус код: 200
- Первый элемент массива содержит обязательные поля:
  - `id` не null
  - `name` не null
  - `price` не null

**Автоматизация:** `SellerItemsRestAssuredTest.testSellerItemsHaveRequiredFields()`

---

### TC-007: Получение всех объявлений продавца (HttpClient)

**Приоритет:** Высокий  
**Предусловия:**
- API доступен
- Создано минимум одно объявление с sellerID = 555123

**Шаги:**
1. Создать объявление с sellerID = 555123 через POST `/api/1/item`
2. Отправить GET запрос на `/api/1/555123/item`
3. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Статус код: 200
- Тело ответа - массив с минимум одним объектом
- Размер массива больше 0
- Первый элемент массива содержит `sellerId` равный 555123

**Автоматизация:** `SellerItemsHttpClientTest.testGetSellerItems()`

---

### TC-008: Получение статистики объявления (REST Assured)

**Приоритет:** Высокий  
**Предусловия:**
- API доступен
- Создано объявление с статистикой

**Шаги:**
1. Создать объявление со статистикой через POST `/api/1/item`
2. Извлечь ID созданного объявления из ответа
3. Отправить GET запрос на `/api/1/statistic/{id}`
4. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Статус код: 200
- Тело ответа - массив с минимум одним объектом
- Первый элемент массива содержит поля статистики:
  - `contacts` >= 0
  - `likes` >= 0
  - `viewCount` >= 0

**Автоматизация:** `ItemStatisticsRestAssuredTest.testGetItemStatistics()`

---

### TC-009: Получение статистики объявления (HttpClient)

**Приоритет:** Высокий  
**Предусловия:**
- API доступен
- Создано объявление с статистикой

**Шаги:**
1. Создать объявление со статистикой через POST `/api/1/item`
2. Извлечь ID созданного объявления из ответа
3. Отправить GET запрос на `/api/1/statistic/{id}`
4. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Статус код: 200
- Тело ответа содержит поля:
  - `contacts`
  - `likes`
  - `viewCount`

**Автоматизация:** `ItemStatisticsHttpClientTest.testGetItemStatistics()`

---

## Покрытие функциональности

| Функциональность | Покрытие |
|-----------------|----------|
| Создание объявления |  TC-001, TC-002 |
| Получение объявления по ID |  TC-003, TC-004 |
| Получение объявлений продавца |  TC-005, TC-006, TC-007 |
| Получение статистики |  TC-008, TC-009 |

---

## Матрица тестирования

| Эндпоинт | REST Assured | HttpClient |
|----------|-----------|---------|
| POST /api/1/item |  TC-001 |  TC-002 |
| GET /api/1/item/:id |  TC-003 |  TC-004 |
| GET /api/1/:sellerID/item |  TC-005, TC-006 |  TC-007 |
| GET /api/1/statistic/:id |  TC-008 |  TC-009 |

---

## Итого

**Всего тест-кейсов:** 9  
**Автоматизировано:** 9
**Статус:** Все проходят успешно 